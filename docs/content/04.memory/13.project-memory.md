---
title: é¡¹ç›®çº§è®°å¿†
description: åŸºäº AGENTS.md çš„é¡¹ç›®çº§æŒä¹…åŒ–è®°å¿†ç³»ç»Ÿ
navigation:
  icon: i-lucide-folder-open
---

# é¡¹ç›®çº§è®°å¿† (Project Memory)

é¡¹ç›®çº§è®°å¿†ç³»ç»Ÿæä¾›åŸºäºæ–‡ä»¶ï¼ˆAGENTS.mdï¼‰çš„ç»“æ„åŒ–è®°å¿†å­˜å‚¨ï¼Œç”¨äºè·¨ä¼šè¯ä¿æŒé¡¹ç›®ä¸Šä¸‹æ–‡ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

```
pkg/memory/project/
â”œâ”€â”€ types.go      # ç±»å‹å®šä¹‰
â”œâ”€â”€ store.go      # Store æ¥å£
â””â”€â”€ file_store.go # AGENTS.md æ–‡ä»¶å­˜å‚¨å®ç°
```

### æ•°æ®ç»“æ„

```go
// ProjectMemory é¡¹ç›®è®°å¿†
type ProjectMemory struct {
    ProjectID   string             // é¡¹ç›® ID
    Title       string             // é¡¹ç›®æ ‡é¢˜
    Description string             // é¡¹ç›®æè¿°
    Sections    map[string]*Section // ç« èŠ‚
    Metadata    map[string]any     // å…ƒæ•°æ®
    CreatedAt   time.Time
    UpdatedAt   time.Time
}

// Section ç« èŠ‚ï¼ˆå¦‚ã€Œç”¨æˆ·åå¥½ã€ã€Œå…³é”®é€‰æ‹©ã€ï¼‰
type Section struct {
    Name      string
    Protected bool      // æ˜¯å¦å—ä¿æŠ¤ï¼ˆä¸è‡ªåŠ¨æ¸…ç†ï¼‰
    Entries   []*Entry
}

// Entry æ¡ç›®
type Entry struct {
    Timestamp time.Time
    Category  string    // åˆ†ç±»æ ‡ç­¾
    Content   string
    Source    string    // æ¥æºï¼ˆdialog/tool/systemï¼‰
    Metadata  map[string]any
}
```

## åŸºæœ¬ç”¨æ³•

### åˆ›å»ºå­˜å‚¨

```go
import "github.com/astercloud/aster/pkg/memory/project"

// åˆ›å»ºæ–‡ä»¶å­˜å‚¨
store := project.NewFileStore(&project.StoreConfig{
    BasePath: "workspaces",       // é¡¹ç›®åŸºç¡€è·¯å¾„
    FileName: "AGENTS.md",        // è®°å¿†æ–‡ä»¶å
})
```

### è¿½åŠ æ¡ç›®

```go
ctx := context.Background()

// è¿½åŠ ç”¨æˆ·åå¥½
err := store.AppendEntry(ctx, projectID, project.SectionPreferences, &project.Entry{
    Category: "style",
    Content:  "ç”¨æˆ·å¸Œæœ›è½»æ¾å¹½é»˜çš„é£æ ¼",
    Source:   "dialog",
})

// è¿½åŠ å…³é”®é€‰æ‹©
err = store.AppendEntry(ctx, projectID, project.SectionChoices, &project.Entry{
    Category: "topic",
    Content:  "[é€‰é¢˜ç¡®è®¤] é€‰æ‹©äº†ã€ŒAI æ—¶ä»£çš„å†™ä½œé©å‘½ã€",
    Source:   "workflow",
})
```

### æ›´æ–°å·¥ä½œæµçŠ¶æ€

```go
err := store.UpdateWorkflowStatus(ctx, projectID, &project.WorkflowStep{
    Step:      "é€‰é¢˜ç¡®è®¤",
    Status:    "completed",
    Timestamp: time.Now(),
})
```

### è·å–è®°å¿†æ‘˜è¦

```go
// è·å–æ‘˜è¦ç”¨äºæ³¨å…¥ AI ä¸Šä¸‹æ–‡
summary, err := store.GetSummary(ctx, projectID)
// è¿”å›æ ¼å¼åŒ–çš„ Markdown æ‘˜è¦
```

## é¢„å®šä¹‰ç« èŠ‚

```go
const (
    SectionPreferences = "ç”¨æˆ·åå¥½"    // è‡ªåŠ¨æå–çš„ç”¨æˆ·åå¥½
    SectionChoices     = "å…³é”®é€‰æ‹©"    // ç”¨æˆ·çš„é€‰é¡¹é€‰æ‹©è®°å½•
    SectionWorkflow    = "å·¥ä½œæµçŠ¶æ€"  // å½“å‰è¿›åº¦è¿½è¸ª
    SectionParams      = "ç”Ÿæˆå‚æ•°"    // æ¯æ¬¡ç”Ÿæˆçš„å‚æ•°å¿«ç…§
)
```

## AGENTS.md æ–‡ä»¶æ ¼å¼

```markdown
# é¡¹ç›®åç§°

## é¡¹ç›®ä¿¡æ¯

- **åˆ›å»ºæ—¶é—´**: 2024-12-08
- **é¡¹ç›®ç±»å‹**: é•¿ç¯‡å°è¯´

## ç”¨æˆ·åå¥½ [protected]

<!-- è‡ªåŠ¨ä»å¯¹è¯ä¸­æå–ï¼Œæ£€æµ‹å…³é”®è¯ï¼šæƒ³è¦ã€å¸Œæœ›ã€å–œæ¬¢ã€å¿…é¡»ã€ä¸è¦ç­‰ -->

- 2024-12-08 10:30: [style] ç”¨æˆ·å¸Œæœ›è½»æ¾å¹½é»˜çš„é£æ ¼
- 2024-12-08 11:15: [constraint] ä¸è¦ä½¿ç”¨ç½‘ç»œæµè¡Œè¯­

## å…³é”®é€‰æ‹© [protected]

<!-- è®°å½•ç”¨æˆ·åœ¨å·¥ä½œæµä¸­çš„é€‰é¡¹é€‰æ‹© -->

- 2024-12-08 10:35: [é€‰é¢˜ç¡®è®¤] é€‰æ‹©äº†ã€ŒAI æ—¶ä»£çš„å†™ä½œé©å‘½ã€

## å·¥ä½œæµçŠ¶æ€

| æ­¥éª¤ | çŠ¶æ€ | æ—¶é—´ |
|------|------|------|
| é€‰é¢˜ç¡®è®¤ | âœ… å®Œæˆ | 2024-12-08 10:35 |
| å¤§çº²ç”Ÿæˆ | ğŸ”„ è¿›è¡Œä¸­ | 2024-12-08 11:00 |

## ç”Ÿæˆå‚æ•°

### 2024-12-08 11:00 ç”Ÿæˆ

- **æ¨¡å‹**: gpt-4
- **æ¸©åº¦**: 0.7
- **æœ€å¤§é•¿åº¦**: 2000
```

## ä¸å…¶ä»–æ¨¡å—é›†æˆ

### ç»“åˆå¯¹è¯æå–å™¨

```go
import (
    "github.com/astercloud/aster/pkg/memory/project"
    "github.com/astercloud/aster/pkg/memory/dialog"
)

store := project.NewFileStore(config)
extractor := dialog.NewExtractor(dialog.WritingStyleKeywords(), nil)

// ä»å¯¹è¯ä¸­æå–å¹¶ä¿å­˜
prefs := extractor.Extract(userMessage)
for _, pref := range prefs {
    store.AppendEntry(ctx, projectID, project.SectionPreferences, &project.Entry{
        Category: string(pref.Category),
        Content:  pref.Content,
        Source:   "dialog",
    })
}
```

## æœ€ä½³å®è·µ

1. **ä½¿ç”¨ `[protected]` æ ‡è®°é‡è¦ç« èŠ‚** - é˜²æ­¢è‡ªåŠ¨æ¸…ç†è¯¯åˆ 
2. **å¼‚æ­¥å†™å…¥** - ä¸é˜»å¡ä¸»æµç¨‹ï¼Œä½¿ç”¨ goroutine å†™å…¥
3. **å®šæœŸè·å–æ‘˜è¦** - åœ¨å…³é”®èŠ‚ç‚¹æ³¨å…¥ AI ä¸Šä¸‹æ–‡
4. **åˆ†ç±»å­˜å‚¨** - ä½¿ç”¨ Category å­—æ®µä¾¿äºåç»­è¿‡æ»¤å’Œæ£€ç´¢
